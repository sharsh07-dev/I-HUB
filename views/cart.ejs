<%- include('./partials/header.ejs') %>

<h1 class="page-title">Your Shopping Cart</h1>

<% if (!cart || cart.items.length === 0) { %>
    <p>Your cart is empty.</p>
    <a href="/products" class="btn">Continue Shopping</a>
<% } else { %>
    <div class="cart-container">
        <div class="cart-items">
            <% cart.items.forEach(item => { %>
                <div class="cart-item">
                    <img src="<%= item.product.imageUrl %>" alt="<%= item.product.name %>" class="cart-item-image">
                    <div class="cart-item-info">
                        <h4><%= item.product.name %></h4>
                        <p>Quantity: <%= item.quantity %></p>
                        <p>Price: $<%= (item.product.price * item.quantity).toFixed(2) %></p>
                    </div>
                    <form action="/cart/remove/<%= item.product._id %>" method="POST">
                        <button type="submit" class="btn btn-danger btn-small">Remove</button>
                    </form>
                </div>
            <% }) %>
        </div>

        <div class="cart-summary">
            <h3>Total: $<%= cart.total.toFixed(2) %></h3>
            
            <form action="/order/create" method="POST">
                <button type="submit" class="btn btn-primary btn-full">Proceed to Checkout</button>
            </form>
        </div>
    </div>
<% } %>

<%- include('./partials/footer.ejs') %>