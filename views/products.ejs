<%- include('./partials/header.ejs') %>

<h1 class="page-title">All Products</h1>

<div class="product-grid">
    <% if (products.length > 0) { %>
        <% products.forEach(product => { %>
            <div class="product-card">
                <a href="/products/<%= product._id %>" class="product-card-link">
                    <img src="<%= product.imageUrl %>" alt="<%= product.name %>" class="product-image">
                    <h3 class="product-name"><%= product.name %></h3>
                 <p class="product-price"><%= product.price.toLocaleString('en-IN', { style: 'currency', currency: 'INR' }) %></p>
                
                <form action="/cart/add" method="POST">
                    <input type="hidden" name="productId" value="<%= product._id %>">
                    <input type="hidden" name="quantity" value="1">
                    <button type="submit" class="btn btn-small">Add to Cart</button>
                </form>
            </div>
        <% }) %>
    <% } else { %>
        <p>No products found. (Did you add any to your MongoDB database?)</p>
    <% } %>
</div>

<%- include('./partials/footer.ejs') %>